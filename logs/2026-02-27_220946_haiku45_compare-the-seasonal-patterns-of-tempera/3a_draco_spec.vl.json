{
  "title": "Seattle Seasonal Weather Patterns: Temperature vs Precipitation",
  "description": "Exploring the relationship between temperature and precipitation across seasons",
  "width": 700,
  "height": 500,
  "data": {
    "url": "seattle-weather.csv"
  },
  "transform": [
    {
      "calculate": "month(datum.date)",
      "as": "month"
    },
    {
      "calculate": "if(datum.month >= 3 && datum.month <= 5, 'Spring', if(datum.month >= 6 && datum.month <= 8, 'Summer', if(datum.month >= 9 && datum.month <= 11, 'Fall', 'Winter')))",
      "as": "season"
    }
  ],
  "mark": {
    "type": "point",
    "opacity": 0.6,
    "tooltip": true
  },
  "encoding": {
    "x": {
      "field": "temp_max",
      "type": "quantitative",
      "title": "Maximum Temperature (\u00b0C)",
      "scale": {
        "type": "linear"
      }
    },
    "y": {
      "field": "temp_min",
      "type": "quantitative",
      "title": "Minimum Temperature (\u00b0C)",
      "scale": {
        "type": "linear"
      }
    },
    "size": {
      "field": "precipitation",
      "type": "quantitative",
      "title": "Precipitation (mm)",
      "scale": {
        "type": "linear",
        "zero": true,
        "range": [
          20,
          300
        ]
      }
    },
    "color": {
      "field": "season",
      "type": "ordinal",
      "title": "Season",
      "scale": {
        "type": "ordinal",
        "domain": [
          "Winter",
          "Spring",
          "Summer",
          "Fall"
        ],
        "range": [
          "#4575b4",
          "#91bfdb",
          "#fee090",
          "#fc8d59"
        ]
      }
    },
    "tooltip": [
      {
        "field": "date",
        "type": "temporal",
        "title": "Date"
      },
      {
        "field": "temp_max",
        "type": "quantitative",
        "title": "Max Temp (\u00b0C)",
        "format": ".1f"
      },
      {
        "field": "temp_min",
        "type": "quantitative",
        "title": "Min Temp (\u00b0C)",
        "format": ".1f"
      },
      {
        "field": "precipitation",
        "type": "quantitative",
        "title": "Precipitation (mm)",
        "format": ".1f"
      },
      {
        "field": "season",
        "type": "nominal",
        "title": "Season"
      }
    ]
  }
}